[gd_scene load_steps=5 format=3 uid="uid://bj04ov6ofjiup"]

[ext_resource type="PackedScene" uid="uid://dd8s7nwmnq0ud" path="res://Collectable/ore_template.tscn" id="1_y7sq5"]
[ext_resource type="Texture2D" uid="uid://couxge5p5egvg" path="res://Sprites/Items/Ores/gold_ore.png" id="2_43dbl"]

[sub_resource type="Shader" id="Shader_np2hv"]
resource_local_to_scene = true
code = "shader_type canvas_item;
render_mode unshaded;

uniform vec4 hologram_tint = vec4(0.0, 1.0, 1.0, 1.0); // Farbton des Hologramms
uniform float line_frequency = 20.0; // Häufigkeit der Linien
uniform float line_intensity = 0.2;  // Sichtbarkeit der Linien
uniform float distortion_strength = 0.05; // Verzerrungsstärke
uniform float glow_intensity = 0.3; // Glüheffekt-Intensität
uniform float time_speed = 2.0; // Geschwindigkeit der Animation

void fragment() {
    vec2 uv = UV;

    // Zeit für Animation
    float time = TIME * time_speed;

    // Horizontale Verzerrung basierend auf UV-Koordinaten und Zeit
    float distortion = sin(uv.y * 10.0 + time) * distortion_strength;

    // Verzerrung auf UV anwenden
    uv.x += distortion;

    // Linien-Effekt basierend auf UV-Koordinaten und Zeit
    float line_effect = abs(sin(uv.y * line_frequency + time)) * line_intensity;

    // Original-Textur abrufen
    vec4 tex_color = texture(TEXTURE, uv);

    // Hologramm-Farbe mit Original-Textur kombinieren
    vec4 holo_color = mix(tex_color, hologram_tint, line_effect * glow_intensity);

    // Finale Farbe (ursprüngliche Transparenz bleibt erhalten)
    COLOR = vec4(holo_color.rgb, tex_color.a);
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_18rk4"]
resource_local_to_scene = true
shader = SubResource("Shader_np2hv")
shader_parameter/hologram_tint = Vector4(1, 1, 1, 1)
shader_parameter/line_frequency = 3.0
shader_parameter/line_intensity = 0.6
shader_parameter/distortion_strength = 0.0
shader_parameter/glow_intensity = 0.5
shader_parameter/time_speed = 2.0

[node name="Gold_Ore" instance=ExtResource("1_y7sq5")]
Ore_type = 2
mass = 3

[node name="Sprite2D" parent="." index="0"]
material = SubResource("ShaderMaterial_18rk4")
texture = ExtResource("2_43dbl")

[node name="CollisionShape2D" parent="." index="1"]
visible = false
